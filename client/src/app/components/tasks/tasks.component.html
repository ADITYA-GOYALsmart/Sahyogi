<app-navbar>
  <div class="parent">
    <div class="task-container">
      <div class="button-container">
        <button
          mat-raised-button
          (click)="createTask()"
          class="add-task-button"
        >
          Add Task
        </button>
        <!-- <button class="filter-task-button">🔍 Filter Task</button> -->
      </div>

      <div class="task-section-container" cdkDropListGroup>
        <!-- To Do -->
        <div
          class="task-section"
          cdkDropList
          [cdkDropListData]="todoTasks"
          (cdkDropListDropped)="onTaskDrop($event, 'ToDo')"
        >
          <h1>To Do</h1>
          <mat-card
            class="task-card"
            *ngFor="let task of todoTasks"
            cdkDrag
            (click)="openTaskDetails(task)"
          >
            <div class="task-card-content">
              <div class="task-title">{{ task.taskTitle }}</div>
              <div class="task-desc">{{ task.taskDesc | truncate : 50 }}</div>
            </div>
          </mat-card>
        </div>

        <!-- In Progress -->
        <div
          class="task-section"
          cdkDropList
          [cdkDropListData]="inProgressTasks"
          (cdkDropListDropped)="onTaskDrop($event, 'InProgress')"
        >
          <h1>In Progress</h1>
          <mat-card
            class="task-card"
            *ngFor="let task of inProgressTasks"
            cdkDrag
            (click)="openTaskDetails(task)"
          >
            <div class="task-card-content">
              <div class="task-title">{{ task.taskTitle }}</div>
              <div class="task-desc">{{ task.taskDesc | truncate : 50 }}</div>
            </div>
          </mat-card>
        </div>

        <!-- Done -->
        <div
          class="task-section"
          cdkDropList
          [cdkDropListData]="doneTasks"
          (cdkDropListDropped)="onTaskDrop($event, 'Done')"
        >
          <h1>Done</h1>
          <mat-card
            class="task-card"
            *ngFor="let task of doneTasks"
            cdkDrag
            (click)="openTaskDetails(task)"
          >
            <div class="task-card-content">
              <div class="task-title">{{ task.taskTitle }}</div>
              <div class="task-desc">{{ task.taskDesc | truncate : 50 }}</div>
            </div>
          </mat-card>
        </div>
      </div>
    </div>
  </div>
</app-navbar>
